<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Storage Approaches - DEVXDAO PRUNING GRANT 37</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../grant.html">Grant</a></li><li class="chapter-item expanded "><a href="../../research/research.html"><strong aria-hidden="true">1.</strong> Research</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../industry/the_problem.html"><strong aria-hidden="true">1.1.</strong> The Problem</a></li><li class="chapter-item expanded "><a href="../../industry/analysis.html"><strong aria-hidden="true">1.2.</strong> Analysis</a></li><li class="chapter-item expanded "><a href="../../research/storage_approaches/storage_approaches_include.html" class="active"><strong aria-hidden="true">1.3.</strong> Storage Approaches</a></li><li class="chapter-item expanded "><a href="../../research/thin_provisioning.html"><strong aria-hidden="true">1.4.</strong> Thin Provisioning</a></li><li class="chapter-item expanded "><a href="../../research/pokt_network.html"><strong aria-hidden="true">1.5.</strong> Pokt.Network Achievement</a></li><li class="chapter-item expanded "><a href="../../research/casper_data_structure.html"><strong aria-hidden="true">1.6.</strong> CasperLabs Datastructure</a></li><li class="chapter-item expanded "><a href="../../research/storage_integration_qsfs.html"><strong aria-hidden="true">1.7.</strong> CasperLabs Integration</a></li><li class="chapter-item expanded "><a href="../../research/solution_ideas.html"><strong aria-hidden="true">1.8.</strong> Solution Ideas</a></li></ol></li><li class="chapter-item expanded "><a href="../../solution/solution.html"><strong aria-hidden="true">2.</strong> Solution</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../solution/architecture.html"><strong aria-hidden="true">2.1.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../../solution/qsss_benefits.html"><strong aria-hidden="true">2.2.</strong> Storage System Benefits</a></li></ol></li><li class="chapter-item expanded "><a href="../../requirements/requirements_intro.html"><strong aria-hidden="true">3.</strong> Requirements</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../requirements/requirements_high_level.html"><strong aria-hidden="true">3.1.</strong> Requirements Overview</a></li><li class="chapter-item expanded "><a href="../../requirements/necessary_conditions.html"><strong aria-hidden="true">3.2.</strong> Necessary Conditions</a></li><li class="chapter-item expanded "><a href="../../requirements/solution_vs_necessary_conditions.html"><strong aria-hidden="true">3.3.</strong> Solutions vs Requirements</a></li></ol></li><li class="chapter-item expanded "><a href="../../technology/technology.html"><strong aria-hidden="true">4.</strong> Technology</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technology/qsss/qsss_home.html"><strong aria-hidden="true">4.1.</strong> Quantum Safe Storage</a></li><li class="chapter-item expanded "><a href="../../technology/qsss/qss_algorithm.html"><strong aria-hidden="true">4.2.</strong> Quantum Safe Algo</a></li><li class="chapter-item expanded "><a href="../../technology/primitives/compute/compute.html"><strong aria-hidden="true">4.3.</strong> Compute</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">DEVXDAO PRUNING GRANT 37</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="storage-literature-research-and-remarks"><a class="header" href="#storage-literature-research-and-remarks">Storage Literature Research and Remarks</a></h1>
<p>Here some additional sources where information can be found on efforts on addessing blockchain storage concerns. </p>
<p>This section does not try to provide an exhaustive overview its just inspiration to come to the possible methodologies to find a generic solution.</p>
<h2 id="chain-state-snapshots"><a class="header" href="#chain-state-snapshots">Chain state snapshots</a></h2>
<p>In addition to archiving the chain itself, verifiable archives of the ledger could provide an expedited way to restore node functionality or bootstrap new nodes.</p>
<p>Work has been done within the Bitcoin community around enabling backups of the chain state database. </p>
<p>See this <a href="https://github.com/bitcoin/bitcoin/issues/8037">discussion</a> on considerations for such an approach and <a href="https://github.com/bitcoin/bitcoin/pull/15606">code</a> produced to implement it.</p>
<h3 id="erasure-encoding-for-blockchains"><a class="header" href="#erasure-encoding-for-blockchains">Erasure encoding for blockchains</a></h3>
<p>Erasure coding means a mechanism that data gets cut into pieces so that less overhead is required to store information over multiple disks.</p>
<p>Erasure coding is a simple form of &quot;forward looking error correcting codes&quot;</p>
<p>The question of applying erasure encoding to blockchain data in order to reduce the storage requirements of individual nodes has been explored in this <a href="https://arxiv.org/pdf/1805.00860.pdf">paper</a>. </p>
<p>The authors conclude that such an approach can provide strong assurance of data correctness without large computational overhead.</p>
<p>We believe this is a very elegant way and should be done but care needs to be taken for</p>
<ul>
<li>if using erasure coding technologies like reed solomon, there is a possiblity to loose data (also called the raid5 hole)</li>
<li>order of operation is still important in reed solomon</li>
<li>there is not that much flexibility in data positioning and systems can be rather fragile if not done properly especially in networked environments</li>
</ul>
<p>We as threefold are a big proponent of this approach if done properly.</p>
<h3 id="proofs-of-retrievability"><a class="header" href="#proofs-of-retrievability">Proofs of Retrievability</a></h3>
<p>Nodes who agree to share the task of storing blockchain data have an interest in verifying that the data is in fact recoverable. </p>
<p>To avoid the overhead associated with actually recovering the data, a compact computational proof may be used instead.</p>
<p><a href="http://www.arijuels.com/wp-content/uploads/2013/09/BJO09b.pdf">These authors</a> describe an algorithm based on erasure encoding and random sampling to generate such proofs.</p>
<p>There are multiple ways how proof of retrievability can be implemented as ThreeFold we have implemented a novel way how to do this without the overhead of what is described above.</p>
<h3 id="stateless-clients-sharding-and-scalability"><a class="header" href="#stateless-clients-sharding-and-scalability">Stateless clients, sharding, and scalability</a></h3>
<p>Ethereum's Vitalik Buterin has written extensively on the problem of blockchain scalability and the importance of keeping node operation accessible for the health of blockchain networks. He <a href="https://ethresear.ch/t/the-stateless-client-concept/172">proposes</a> that beyond pruning the chain, nodes might not need to store any state at all to validate blocks and help secure the network.</p>
<p><a href="https://vitalik.ca/general/2021/04/07/sharding.html">Sharding</a> is the approach being taken to improve scalability of Ethereum in it's 2.0 version. This post explains how sharding can be more secure than simply linking multiple chains in a blockchain ecosystem.</p>
<p>&quot;<a href="https://vitalik.ca/general/2021/05/23/scaling.html">The Limits to Blockchain Scalability</a>&quot; details reasons why making node operation accessible is important for chain security. Includes an analysis of what realistic hardware limits are for node operators before becoming too great of an investment to discourage general participation.</p>
<p>A highly resilient chain archiving mechanism would help especially in the case described below:</p>
<p><em>This is all even more important during an attack, when a successful response to the attack will likely involve many users spinning up new nodes when they were not running nodes before.</em>
{{#include storagebackend_lmdb.md}}</p>
<h2 id="data-deduplication"><a class="header" href="#data-deduplication">Data Deduplication</a></h2>
<p>Data deduplicatio technology has been around for the length of the digital age. We should take a look at what the findings and results are to do reliable, trustworthy and secure backups.</p>
<p>Backup de-duplication was invented in the early 2000's. Up to that point in time datacenters with thousands of servers with the same OS would backup the same systems files a thousand times over. With the rise of the digital age this became very expensive quickly efficiency and competitive drivers forced innovators to start looking at data de-duplication. Once of the earliest implementations are described in this <a href="https://patents.justia.com/patent/7254596">patent</a> which is by the way a patent as done by one of our first companies from our Incubator, please do not we don't believe in patents any more and we don't execute on any of them, we believe the only way forward is opensource. </p>
<p>The use of hashes to comparing local files and backed up files in a central storage facility is a very elegant manner to know if a file (read data) is already backed up. This works not just for one server with files installed but also allows to reach large efficiency gains over a large number of servers. </p>
<p>Excerpt from the patent file:</p>
<p><em>The invention relates to an improvement in backup technology, and more particularly, creates a solution for massive server backup in Internet data center and enterprise data center environments, resulting into a solution for disaster recovery and data protection. The invention is an improved System and a Method of using a hashing key of file content for more efficient and more effective computer file and computer program backups.</em></p>
<p><em>The first step in the process is to scan the file system on the target machine (computer system to be backed up) and creating a hashing key, creating a unique digital code for each of the files to be backed up. In a preferred embodiment, in order to reduce the processing time, a hashing key is only created for the files having a modification date attributed that is more recent than the last backup.</em></p>
<p><em>The resulting hashing keys are stored in a local database—a database on the target computer, for example—for further comparison during the current, and future, backup sessions. The local database also includes the complete path of each backed up file.</em></p>
<p><em>The stored hashing keys are checked against previous hashing key entries in the local database. In this way, the hashing keys are used to check each local file to determine if it was previously backed up on the target system. The hashing keys not found in the local database key list are used in the next step of the process.</em></p>
<p><em>The hashing keys that were not found in the local hashing key database are checked against the hashing keys of the files stored on a central storage server. This check is used to determine if a particular file is already present on the central storage server. The file may be present as the result of a backup from another server or system, or from prior backup operations.</em></p>
<p><em>The decision whether to back up is performed file by file, instead of block-by-block for example. This strongly reduces the number of comparisons and the size of the local database, and is very well adapted to farm servers in which not only data blocks, but often complete files, are duplicated in several servers.</em></p>
<p>This principle, identifying a 'blob' of data by a hash and then checking whether that hash already exists in a data store is a sound principle to also use for blockchains pruning and de-duplication. By definition blockchain nodes will contain the same data on all nodes that are considered to be part of the good nodes. For pruning purposes this data is meant to be stored elsewhere and on the blockchain node itself (which leads to <code>N</code> copies of the same data on all <code>N</code> nodes). The principle describe in the patent paper, to identify a chunk of chain data by a hash and then somehow (to be defined) checking this hash against all the participating nodes seems like a good consensus mechanism that all the <code>blobs</code> of data have the same content. After such proof has been created (and store) the data can be stored remotely is a (to be defined) smart manner.</p>
<p>If we take this principle and apply it to a blockchain and the pruning challenge then, identifying a 'blob' of data by a hash and checking whether that hash already exists in a data store is a sound principle to also use for blockchain pruning and de-duplication.  By definition blockchain nodes will contain the same data on all nodes that are considered to be part of the <em>good</em> nodes.  For pruning purposes this data is meant to be stored elsewhere and on the blockchain node itself (which leads to <code>N</code> copies of the same data on all <code>N</code> nodes).  The principle describe in the patent paper, to identify a chunk of chain data by a hash and then somehow (to be defined) checking this hash against all the participating nodes seems like a good consensus mechanism that all the <code>blobs</code> of data have the same content.  After such proof has been created (and store) the data can be stored remotely is a (to be defined) smart manner.</p>
<p>This technology is battle proven over the last two decades and provides a solid starting point for a blockchain pruning solution. We will come back to this later and use it to build a pruning system.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../industry/analysis.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../research/thin_provisioning.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../industry/analysis.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../research/thin_provisioning.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../mermaid.min.js"></script>
        <script type="text/javascript" src="../../mermaid-init.js"></script>


    </body>
</html>
